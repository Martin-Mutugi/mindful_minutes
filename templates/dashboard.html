{% extends "base.html" %}

{% block content %}
<section class="dashboard-grid">
  <!-- Welcome + Mood Chart -->
  <div class="card chart-card">
    <h2><i class="fas fa-chart-line"></i> Dashboard</h2>
    <p>Welcome, <strong>{{ current_user.username }}</strong>!
      {% if current_user.is_premium %}
        <span class="badge premium"><i class="fas fa-crown"></i> Premium Member</span>
      {% endif %}
    </p>

    <h3>Your Mood Trends</h3>
    <canvas id="moodChart"
            data-dates='{{ dates|tojson }}'
            data-scores='{{ scores|tojson }}'
            aria-label="Mood trend chart"
            role="img">
    </canvas>
  </div>

  <!-- Mood Stats -->
  <div class="card stats-card">
    <h3><i class="fas fa-heartbeat"></i> Mood Statistics</h3>
    <p>Total entries: <strong>{{ total_entries }}</strong></p>
    <ul class="mood-list">
      {% for mood, count in mood_counts.items() %}
        <li><span class="mood-label"><i class="fas fa-circle"></i> {{ mood }}</span>: {{ count }}</li>
      {% endfor %}
    </ul>
  </div>

  <!-- Quick Actions -->
  <div class="card actions-card">
    <h3><i class="fas fa-bolt"></i> Quick Actions</h3>
    <div class="action-buttons">
      <a href="{{ url_for('journal.journal') }}" class="btn"><i class="fas fa-pen"></i> Write Journal</a>
      <a href="{{ url_for('meditate.meditate') }}" class="btn"><i class="fas fa-spa"></i> Start Meditation</a>
      {% if not current_user.is_premium %}
        <a href="{{ url_for('premium.premium') }}" class="btn highlight"><i class="fas fa-rocket"></i> Go Premium</a>
      {% endif %}
    </div>
  </div>
</section>
{% endblock %}
