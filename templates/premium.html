{% extends "base.html" %}

{% block content %}
<section class="premium-grid">
  <div class="card">
    <h2><i class="fas fa-star"></i> Premium Membership</h2>

    {% if current_user.is_premium %}
    <div class="premium-status">
      <h3><i class="fas fa-crown"></i> You're a Premium Member!</h3>
      <p>
        Thank you for supporting <strong>Mindful Minutes</strong>.<br>
        {% if current_user.premium_since %}
          Subscription started on <strong>{{ current_user.premium_since.strftime('%Y-%m-%d') }}</strong>.
        {% else %}
          Your subscription is active ðŸŽ‰
        {% endif %}
      </p>

      <h4>Your Premium Benefits:</h4>
      <ul class="benefits-list">
        {% for feature in premium_features %}
          <li><i class="fas fa-check-circle"></i> {{ feature }}</li>
        {% endfor %}
      </ul>

      <a href="{{ url_for('meditate.meditate') }}" class="btn premium-access-btn">
        <i class="fas fa-headphones"></i> Start Premium Meditation
      </a>
    </div>

    {% else %}
    <div class="premium-offer">
      <h3><i class="fas fa-gem"></i> Upgrade to Premium</h3>
      <p>Compare whatâ€™s included in Free vs Premium:</p>

      <div class="feature-comparison">
        <div class="free-features">
          <h4>Free Plan</h4>
          <ul>
            {% for feature in free_features %}
              <li><i class="fas fa-minus-circle"></i> {{ feature }}</li>
            {% endfor %}
            <li><i class="fas fa-headphones"></i> Basic Meditations (Gratitude, Breathing, Focus)</li>
          </ul>
        </div>

        <div class="premium-features">
          <h4>Premium Plan</h4>
          <ul>
            {% for feature in premium_features %}
              <li><i class="fas fa-star"></i> {{ feature }}</li>
            {% endfor %}
            <li><i class="fas fa-music"></i> Exclusive Meditations (Deep Sleep, Stress Relief, Morning Energy)</li>
          </ul>
        </div>
      </div>

      <div class="pricing">
        <h4><i class="fas fa-dollar-sign"></i> Only $5/month</h4>
        <form method="POST" action="{{ url_for('premium.initiate_payment') }}">
          <input type="hidden" name="amount" value="5.00">
          <button type="submit" class="btn premium-btn">
            <i class="fas fa-rocket"></i> Upgrade to Premium
          </button>
        </form>
        <p class="small-text"><i class="fas fa-shield-alt"></i> Secure payment powered by IntaSend. Cancel anytime.</p>
      </div>
    </div>
    {% endif %}
  </div>
</section>
{% endblock %}
